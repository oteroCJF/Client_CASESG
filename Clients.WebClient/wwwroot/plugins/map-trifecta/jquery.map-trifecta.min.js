function removeAllSelectedRowsAndParts(){for(var a=0;a<partsArr.length;a++)selectRowAndPart(partsArr[a],!1)}function selectRowAndPart(a,b){b?$("table tr[data-mapid="+a+"]").css("background-color","yellow"):$("table tr[data-mapid="+a+"]").css("background-color","transparent"),$("area[data-mapid="+a+"]").data("maphilight",{alwaysOn:b}).trigger("alwaysOn.maphilight")}var $imageMap,settings;!function(a){a.fn.rwdImageMaps=function(){var b=this,c=parseFloat(a.fn.jquery),d=function(){b.each(function(){if("undefined"!=typeof a(this).attr("usemap")){var b=this,d=a(b);a("<img />").load(function(){var e,f,g="width",h="height";if(c<1.6?(e=b.getAttribute(g),f=b.getAttribute(h)):(e=d.attr(g),f=d.attr(h)),!e||!f){var i=new Image;i.src=d.attr("src"),e||(e=i.width),f||(f=i.height)}var j=d.width()/100,k=d.height()/100,l=d.attr("usemap").replace("#",""),m="coords";a('map[name="'+l+'"]').find("area").each(function(){var b=a(this);b.data(m)||b.data(m,b.attr(m));for(var c=b.data(m).split(","),d=new Array(c.length),g=0;g<d.length;++g)g%2===0?d[g]=parseInt(c[g]/e*100*j):d[g]=parseInt(c[g]/f*100*k);b.attr(m,d.toString())})}).attr("src",d.attr("src"))}})};return a(window).resize(d).trigger("resize"),setTimeout(d,500),this}}(jQuery),function(a){var b,c,d,e,f,g,h,j,k,l,m,n;if(c=!!document.createElement("canvas").getContext,b=function(){var a=document.createElement("div");a.innerHTML='<v:shape id="vml_flag1" adj="1" />';var b=a.firstChild;return b.style.behavior="url(#default#VML)",!b||"object"==typeof b.adj}(),!c&&!b)return void(a.fn.maphilight=function(){return this});if(c){j=function(a){return Math.max(0,Math.min(parseInt(a,16),255))},k=function(a,b){return"rgba("+j(a.substr(0,2))+","+j(a.substr(2,2))+","+j(a.substr(4,2))+","+b+")"},d=function(b){n=$imageMap[0].offsetLeft+"px";var c=a('<canvas style="display: block; margin-left:'+n+"; position: absolute; width:"+b.width+"px;height:"+b.height+'px;"></canvas>').get(0);return c.width=b.width,c.height=b.height,c.getContext("2d").clearRect(0,0,b.width,b.height),c};var o=function(a,b,c,d,e){if(d=d||0,e=e||0,a.beginPath(),"rect"==b)a.rect(c[0]+d,c[1]+e,c[2]-c[0],c[3]-c[1]);else if("poly"==b)for(a.moveTo(c[0]+d,c[1]+e),i=2;i<c.length;i+=2)a.lineTo(c[i],c[i+1]);else"circ"==b&&a.arc(c[0]+d,c[1]+e,c[2],0,2*Math.PI,!1);a.closePath()};e=function(b,c,d,e,f){var h=b.getContext("2d");if(e.shadow){h.save(),"inside"==e.shadowPosition&&(o(h,c,d),h.clip());var i=100*b.width,j=100*b.height;o(h,c,d,i,j),h.shadowOffsetX=e.shadowX-i,h.shadowOffsetY=e.shadowY-j,h.shadowBlur=e.shadowRadius,h.shadowColor=k(e.shadowColor,e.shadowOpacity);var l=e.shadowFrom;l||(l="outside"==e.shadowPosition?"fill":"stroke"),"stroke"==l?(h.strokeStyle="rgba(0,0,0,1)",h.stroke()):"fill"==l&&(h.fillStyle="rgba(0,0,0,1)",h.fill()),h.restore(),"outside"==e.shadowPosition&&(h.save(),o(h,c,d),h.globalCompositeOperation="destination-out",h.fillStyle="rgba(0,0,0,1);",h.fill(),h.restore())}h.save(),o(h,c,d),e.fill&&(h.fillStyle=k(e.fillColor,e.fillOpacity),h.fill()),e.stroke&&(h.strokeStyle=k(e.strokeColor,e.strokeOpacity),h.lineWidth=e.strokeWidth,h.stroke()),h.restore(),e.fade&&a(b).css("opacity",0).animate({opacity:1},100)},f=function(a){a.getContext("2d").clearRect(0,0,a.width,a.height)}}else console.log("iexplorer"),d=function(b){return a('<var style="display:block;width:'+b.width+"px;height:"+b.height+"px;position:absolute; margin-left:"+n+'px;"></var>').get(0)},e=function(b,c,d,e,f){var g,h,i,j;g='<v:fill color="#'+e.fillColor+'" opacity="'+(e.fill?e.fillOpacity:0)+'" />',h=e.stroke?'strokeweight="'+e.strokeWidth+'" stroked="t" strokecolor="#'+e.strokeColor+'"':'stroked="f"',i='<v:stroke opacity="'+e.strokeOpacity+'"/>',"rect"==c?j=a('<v:rect name="'+f+'" filled="t" '+h+' style="zoom:1;margin:0;padding:0;display:block;position:absolute;left:'+d[0]+"px;top:"+d[1]+"px;width:"+(d[2]-d[0])+"px;height:"+(d[3]-d[1])+'px;"></v:rect>'):"poly"==c?j=a('<v:shape name="'+f+'" filled="t" '+h+' coordorigin="0,0" coordsize="'+b.width+","+b.height+'" path="m '+d[0]+","+d[1]+" l "+d.join(",")+' x e" style="zoom:1;margin:0;padding:0;display:block;position:absolute;top:0px;left:0px;width:'+b.width+"px;height:"+b.height+'px;"></v:shape>'):"circ"==c&&(j=a('<v:oval name="'+f+'" filled="t" '+h+' style="zoom:1;margin:0;padding:0;display:block;position:absolute;left:'+(d[0]-d[2])+"px;top:"+(d[1]-d[2])+"px;width:"+2*d[2]+"px;height:"+2*d[2]+'px;"></v:oval>')),j.get(0).innerHTML=g+i,a(b).append(j)},f=function(b){a(b).find("[name=highlighted]").remove()};g=function(a){var b,c=a.getAttribute("coords").split(",");for(b=0;b<c.length;b++)c[b]=parseFloat(c[b]);return[a.getAttribute("shape").toLowerCase().substr(0,4),c]},m=function(b,c){var d=a(b);return a.extend({},c,!!a.metadata&&d.metadata(),d.data("maphilight"))},l=function(a){return!!a.complete&&("undefined"==typeof a.naturalWidth||0!==a.naturalWidth)},h={};var p=!1;a.fn.maphilight=function(i){if(i=a.extend({},a.fn.maphilight.defaults,i),!c&&!p){document.namespaces.add("v","urn:schemas-microsoft-com:vml");var j=document.createStyleSheet(),k=["shape","rect","oval","circ","fill","stroke","imagedata","group","textbox"];a.each(k,function(){j.addRule("v\\:"+this,"behavior: url(#default#VML); antialias:true")}),p=!0}return this.each(function(){var j,k,o,p,q,r,s,u;if(j=a(this),!l(this))return window.setTimeout(function(){j.maphilight(i)},200);if(o=a.extend({},i,!!a.metadata&&j.metadata(),j.data("maphilight")),u=j.get(0).getAttribute("usemap"),u&&(p=a('map[name="'+u.substr(1)+'"]'),j.is('img,input[type="image"]')&&u&&p.size()>0)){if(j.hasClass("maphilighted")){var v=j.parent();j.insertBefore(v),v.remove(),a(p).unbind(".maphilight").find("area[coords]").unbind(".maphilight")}k=a("<div></div>").css({display:"block",position:"relative",marginLeft:"auto",marginRight:"auto","background-image":'url("'+this.src+'")',"background-repeat":"no-repeat","background-size":"contain","background-position":"50%, 50%",width:"100%"}),k.addClass("map").addClass("maphilighted"),o.wrapClass&&(o.wrapClass===!0?k.addClass(a(this).attr("class")):k.addClass(o.wrapClass)),n=$imageMap[0].offsetLeft+"px",j.before(k).css("opacity",1).css(h).remove(),k.append(j),q=d(this),a(q).css(h),s=function(b){var d,f;if(f=m(this,o),!f.neverOn&&!f.alwaysOn){if(d=g(this),e(q,d[0],d[1],f,"highlighted"),f.groupBy){var h;h=/^[a-zA-Z][\-a-zA-Z]+$/.test(f.groupBy)?p.find("area["+f.groupBy+'="'+a(this).attr(f.groupBy)+'"]'):p.find(f.groupBy);var i=this;h.each(function(){if(this!=i){var a=m(this,o);if(!a.neverOn&&!a.alwaysOn){var b=g(this);e(q,b[0],b[1],a,"highlighted")}}})}c||a(q).append("<v:rect></v:rect>")}},a(p).bind("alwaysOn.maphilight",function(){r&&f(r),c||a(q).empty(),a(p).find("area[coords]").each(function(){var b,f;f=m(this,o),f.alwaysOn&&(!r&&c&&(r=d(j[0]),a(r).css(h),r.width=j[0].width,r.height=j[0].height,j.before(r)),f.fade=f.alwaysOnFade,b=g(this),c?e(r,b[0],b[1],f,""):e(q,b[0],b[1],f,""))})}),a(p).trigger("alwaysOn.maphilight").find("area[coords]").bind("mouseover.maphilight",s).bind("mouseout.maphilight",function(a){f(q)}),j.css("opacity","0").css("display","block").css("margin-left","auto").css("margin-right","auto").css("position","relative").addClass("map").addClass("maphilighted")}})},a.fn.maphilight.defaults={fill:!0,fillColor:"FF0000",fillOpacity:.1,stroke:!0,strokeColor:"FF0000",strokeOpacity:1,strokeWidth:1,fade:!0,alwaysOn:!1,neverOn:!1,groupBy:!1,wrapClass:!0,shadow:!1,shadowX:0,shadowY:0,shadowRadius:10,shadowColor:"000000",shadowOpacity:.8,shadowPosition:"outside",shadowFrom:!1}}(jQuery),function(a){var b={url:!1,callback:!1,target:!1,duration:120,on:"dblclick",touch:!1,onZoomIn:!1,onZoomOut:!1,magnify:1.3};a.zoom=function(b,c,d,e){var f,g,h,i,j,k,l,m=a(b).css("position"),n=a(c);return b.style.position=/(absolute|fixed)/.test(m)?m:"relative",b.style.overflow="hidden",d.style.width=d.style.height="",a(d).addClass("zoomImg").css({position:"absolute",top:0,left:0,opacity:0,width:d.width*e,height:d.height*e,border:"none",maxWidth:"none",maxHeight:"none",display:"none"}).appendTo(b),{init:function(){g=a(b).outerWidth(),f=a(b).outerHeight(),c===b?(i=g,h=f):(i=n.outerWidth(),h=n.outerHeight()),j=(d.width-g)/i,k=(d.height-f)/h,l=n.offset()},move:function(a){var b=a.pageX-l.left,c=a.pageY-l.top;c=Math.max(Math.min(c,h),0),b=Math.max(Math.min(b,i),0),d.style.left=b*-j+"px",d.style.top=c*-k+"px"}}},a.fn.zoom=function(c){return this.each(function(){var m,d=a.extend({},b,c||{}),e=d.target||this,f=this,g=a(f),h=document.createElement("img"),i=a(h),j="mousemove.zoom",k=!1;(d.url||(m=g.find("img"),m[0]&&(d.url=m.data("src")||m.attr("src")),d.url))&&(!function(){var a=e.style.position,b=e.style.overflow;g.one("zoom.destroy",function(){g.off(".zoom"),e.style.position=a,e.style.overflow=b,i.remove()})}(),h.onload=function(){function c(c){a("#toZoom").addClass("zoom"),a(".zoomImg").css("display","block"),b.init(),b.move(c),i.stop().fadeTo(a.support.opacity?d.duration:0,1,!!a.isFunction(d.onZoomIn)&&d.onZoomIn.call(h))}function l(){i.stop().fadeTo(d.duration,0,!!a.isFunction(d.onZoomOut)&&d.onZoomOut.call(h)),setTimeout(function(){a(".zoomImg").css("display","none"),a("#toZoom").removeClass("zoom")},250)}var b=a.zoom(e,f,h,d.magnify);"dblclick"===d.on&&g.on("dblclick.zoom",function(d){return k?void 0:(k=!0,c(d),a(document).on(j,b.move),a(document).one("dblclick.zoom",function(){l(),k=!1,a(document).off(j,b.move)}),!1)}),a.isFunction(d.callback)&&d.callback.call(h)},h.src=d.url)})},a.fn.zoom.defaults=b}(jQuery);var partsArr=[];!function(a){a.fn.setMapTable=function(){a("area").hover(function(){var b=a(this).attr("data-mapid");selectRowAndPart(b,!0)},function(){var b=a(this).attr("data-mapid"),c=a.inArray(b,partsArr);c==-1&&selectRowAndPart(b,!1)}),a("tr").hover(function(){var b=a(this).attr("data-mapid"),c=a("area[data-mapid="+b+"]").data("maphilight");void 0!==c&&c.alwaysOn||selectRowAndPart(b,!0)},function(){var b=a(this).attr("data-mapid"),c=a.inArray(b,partsArr);c==-1&&selectRowAndPart(b,!1)}),a("html").on("click",function(b){var c=a(b.target);b.ctrlKey||c.is("a")||c.is("td")||c.is("h1")||c.is("h4")||(removeAllSelectedRowsAndParts(),partsArr=[])}),a("area, tr").on("click",function(b){var c=a(b.target).parent();if(!c.is("a")){var d=a(this).attr("data-mapid");if(b.ctrlKey){var e=jQuery.inArray(d,partsArr);e>-1?(partsArr.splice(e,1),removeAllSelectedRowsAndParts(),partsArr.forEach(function(a){selectRowAndPart(a,!0)})):(partsArr.push(d),selectRowAndPart(d,!0))}else removeAllSelectedRowsAndParts(),selectRowAndPart(d,!0),partsArr=[],partsArr.push(d)}return!1})}}(jQuery),function(a){var b={zoom:!0,table:!0,fill:!0,fillColor:"FF0000",fillOpacity:.1,stroke:!0,strokeColor:"FF0000",strokeOpacity:1,strokeWidth:1,fade:!0,alwaysOn:!1,neverOn:!1,groupBy:!1,wrapClass:!0,shadow:!1,shadowX:0,shadowY:0,shadowRadius:10,shadowColor:"000000",shadowOpacity:.8,shadowPosition:"outside",shadowFrom:!1};a.fn.mapTrifecta=function(c){if($imageMap=this,settings=a.extend({},b,c||{}),$imageMap.maphilight(settings),$imageMap.rwdImageMaps(),settings.zoom){$imageMap.parent().wrap("<span id='toZoom' class='zoom'></span>"),a("#toZoom").zoom({on:"dblclick"}).removeClass("zoom");var d=$imageMap.width();a("#toZoom").width(d)}return settings.table&&a().setMapTable(),this}}(jQuery),jQuery(window).bind("resize",function(a){window.resizeEvt,jQuery(window).resize(function(){clearTimeout(window.resizeEvt),window.resizeEvt=setTimeout(function(){try{$imageMap.maphilight(settings);var a=$imageMap.width();$("#toZoom").width(a)}catch(a){console.error(a.message)}},10)})});